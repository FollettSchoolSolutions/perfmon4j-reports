<div ng-controller="chartControl">
	<h2 class="title">{{ pageTitle }}</h2>
		<div layout="row">
			<span>Chart Name: </span>
			<input type="text" value="" name="chartName" ng-model="chartName"/>
		</div>
		<div layout="row" class="chooserRow"> 
			<span>Choose datasource:</span>
			<select ng-options="datasource as datasource.name for datasource in datasources" ng-model="chosenDatasource" ng-change="loadDatabases()"></select>
		</div>
		<div layout="row" class="chooserRow" > 
			<span>Choose database:</span> 
			<select ng-options="database as database.id for database in databases" ng-model="chosenDatabase" ng-change="loadSystems()"></select>
		</div>
		<div layout="row" class="chooserRow" >
			<span>Date/Time</span>
		</div>
		<div layout="row" class="chooserRow" >
			<label for="startTime">From:</label><input name="startTime" type="text" ng-model="timeStart" ng-blur="loadSystems()"/>
			<label for="endTime">To:</label><input type="text" name="endTime" ng-model="timeEnd" ng-blur="loadSystems()"/>
		</div>
		<div layout="row">
			<span>Series Name:</span>
			<input type="text" ng-model="seriesName" value="" name="seriesName"/>
		</div>
		<div layout="row" class="chooserRow">
			<span>Choose system:</span> 
			<select ng-options="system as system.id for system in systems" ng-model="chosenSystem" ng-change="loadCategories()" required></select>
		</div>
		<div layout="row" class="chooserRow">
			<span>Choose category:</span> 
			<select ng-options="category as category.name for category in categories" ng-model="chosenCategory" ng-change="loadFields()"></select>
		</div>
		<div layout="row" class="chooserRow">
			<span>Choose category field:</span>
			<select ng-options="field as field.name for field in fields" ng-model="chosenField" ng-change="loadAggregations()"></select>
		</div>
		<div layout="row" class="chooserRow">
			<span>Choose aggregation method:</span>
			<select ng-options="aggregationMethod as aggregationMethod for aggregationMethod in aggregationMethods" ng-model="chosenAggregationMethod" ></select>
		</div>
		<md-button ng-disabled="renderDisabled()" ng-click="showChart()" class="md-raised md-primary">Render Chart</md-button>
		<h2 id="chartName" ng-show="showName"> {{chartName}} </h2>
	 	<div id="chart"></div>
</div>
