<script src="c3/c3.min.css"></script>
<h2 class="title">{{ pageTitle }}</h2>
	<section ng-controller="sideNavControl" style="height:750px;"  layout="row" flex>
	    <md-sidenav id="sidenav" class="md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="isToggled()">
	      	<md-toolbar class="md-theme-indigo">
	        	<h4 class="md-toolbar-tools">Chart Infomation</h4>
	      	</md-toolbar>
	      	<md-content layout-padding ng-controller="LeftCtrl">
				<div ng-controller="chartControl">				
				<span>Chart Name: <span class="required">*</span></span>
				<br/>
				<input type="text" ng-model="chartName" value="" name="chartName"/>
				<br/>
				<br/>
				<span>Choose datasource: <span class="required">*</span></span>
				<br/>
				<select class="datasourceSelector" ng-options="datasource as datasource.name for datasource in datasources" ng-model="chosenDatasource" ng-change="loadDatabases()"></select> 
				<br/>
				<br/>
				<span>Choose database: <span class="required">*</span></span> 
				<br/>
				<select class="databaseSelector" ng-options="database as database.id for database in databases" ng-model="chosenDatabase" ng-change="loadSystems()">
					<option value="">Select a database</option>
				</select><img src="images/dataLoading.gif" ng-show="isLoading(chosenDatasource, databases)">
	      		<p>Date / Time</p>
	      		<label for="startTime">From: <span class="required">*</span></label>
	      		<input name="startTime" type="text" ng-model="timeStart" ng-blur="saveStartTime()"/>
	      		<br/>
	      		<label for="endTime">To: <span class="required">*</span></label>
	      		<input class="to" type="text" name="endTime" ng-model="timeEnd" ng-blur="saveEndTime()"/>
	      		<p></p>
	      		<div class="form">
		      		<form class="insideForm" name="insideForm">
		      			<h4>Series</h4>
		      			<span>Series Name: <span class="required">*</span></span>
		      			<br/>
						<input type="text" ng-model="seriesName" value="" name="seriesName" ng-blur="saveSeriesName()"/>
						<br/>
						<span style="color:red;font-size:11px" ng-show="!validateSeriesName()">
						Invalid series name. Can't include _, #, or &.
						</span>
						<br/>
		      			<span>Choose system: <span class="required">*</span></span> 
						<br/>
						<select class="chartSelect" ng-options="system as system.id for system in systems" ng-model="chosenSystem" ng-change="loadCategories()" required>
							<option value="">Select a system</option>
						</select> <img src="images/dataLoading.gif" ng-show="isLoading(chosenDatabase, systems)">
						<br/>
						<span>Choose category: <span class="required">*</span></span> 
						<br/>
						<select class="chartSelect" ng-options="category as category.name for category in categories" ng-model="chosenCategory" ng-change="loadFields()">
							<option value="">Select a category</option>
						</select><img src="images/dataLoading.gif" ng-show="isLoading(chosenSystem, categories)">
						<br/>
						<span>Choose category field: <span class="required">*</span></span>
						<br/>
						<select class="chartSelect" ng-options="field as field.name for field in fields" ng-model="chosenField" ng-change="loadAggregations()">
							<option value="">Select a category field</option>
						</select><img src="images/dataLoading.gif" ng-show="isLoading(chosenCategory, fields)">
						<br/>
						<span>Choose aggregation method:</span>
						<br/>
						<select class="chartSelect" ng-options="aggregationMethod as aggregationMethod for aggregationMethod in aggregationMethods" ng-model="chosenAggregationMethod" >
							<option value="">Select an aggregation method</option>
						</select><img src="images/dataLoading.gif" ng-show="isLoading(chosenField, aggregationMethods)">
		      		</form>
		  		</div>
		  			<md-button id="renderChart" ng-disabled="renderDisabled()" ng-click="showChart()" class="md-raised md-primary">Render Chart</md-button>
	        	<md-button id="save" ng-disabled="true" class="md-raised md-primary">Save</md-button>
	        	<md-button id="clear" ng-click="clearAllFields()" class="md-raised">Clear</md-button>
	        	<md-button id="close" ng-click="close();toggleClose()" class="md-raised" id="closeSidenav">
	        		Close
	        	</md-button>
	        		</div>
	      	</md-content>
	    </md-sidenav>	    
			    <md-content class="md-accent md-hue-1 chart-view">
			 		<md-button ng-show="!isToggled()" ng-click="toggleLeft();toggleOpen()" class="md-raised">Open Chart Config</md-button>
		      		
 			      		<div ng-controller="chartRenderControl">
 			      			<div ng-show="isShowable()" style="width: 100%; height: 100%;">
								<h2 id="chartName"> {{name()}} </h2>
									<div id="chart" style="width: 100%; height: 100%"></div>
 			      			</div>
 						</div>
					
		    	</md-content>
	</section>